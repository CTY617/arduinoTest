const int pushButton = 2;
const int redPin = 3;
const int greenPin = 4;
const int bluePin = 5;

bool currentButtonState = HIGH;
bool lastButtonState = HIGH;

int cycleColor = 0; // 0=紅, 1=綠, 2=藍
unsigned long lastChangeTime = 0;
const unsigned long interval = 2000; // 2秒

void setup() {
  pinMode(redPin, OUTPUT);
  pinMode(greenPin, OUTPUT);
  pinMode(bluePin, OUTPUT);
  pinMode(pushButton, INPUT_PULLUP);

  digitalWrite(redPin, HIGH);
  digitalWrite(greenPin, HIGH);
  digitalWrite(bluePin, HIGH);
}

void loop() {
  currentButtonState = digitalRead(pushButton);

  if (currentButtonState == LOW) {
    // 按下按鈕時全部熄滅
    digitalWrite(redPin, HIGH);
    digitalWrite(greenPin, HIGH);
    digitalWrite(bluePin, HIGH);
  } else {
    // 沒按下按鈕時輪流播放
    unsigned long currentTime = millis();
    if (currentTime - lastChangeTime >= interval) {
      cycleColor = (cycleColor + 1) % 3; // 循環 0→1→2→0
      lastChangeTime = currentTime;
    }

    // 根據 cycleColor 顯示顏色（共陽邏輯：LOW = 亮）
    digitalWrite(redPin, cycleColor == 0 ? LOW : HIGH);
    digitalWrite(greenPin, cycleColor == 1 ? LOW : HIGH);
    digitalWrite(bluePin, cycleColor == 2 ? LOW : HIGH);
  }

  lastButtonState = currentButtonState;
}
